---
const { title, code } = Astro.props;
---

<section
  x-data="{
    showCode: false,
    copied: false,
    copyToClipboard() {
      const code = this.$refs.codeBlock.innerText.trim();
      navigator.clipboard.writeText(code)
        .then(() => {
          this.copied = true;
          setTimeout(() => this.copied = false, 2000); // hilang setelah 2 detik
        });
    }
  }"
  class="border border-gray-300 rounded-lg overflow-hidden shadow-sm"
>
  <div class="p-6 bg-gray-50 flex justify-center items-center">
    <slot />
  </div>

  <!-- Tombol Show/Hide Code -->
  <div class="border-t-4 border-black bg-yellow-200 p-3 flex justify-between items-center">
    <span class="font-bold dark:text-black">{title || "Preview"}</span>

    <div class="flex items-center gap-2">
      <!-- Tombol Copy -->
      <button
        @click="copyToClipboard"
        class="border-2 border-black dark:text-black px-3 py-1 font-semibold rounded-lg shadow-[3px_3px_0_#000] hover:translate-x-[3px] hover:translate-y-[3px] hover:shadow-none transition-transform cursor-pointer"
      >
        ğŸ“‹ Copy
      </button>

      <!-- Tombol Show/Hide -->
      <button
        @click="showCode = !showCode"
        class="border-2 border-black dark:text-black px-4 py-1 font-semibold rounded-lg shadow-[3px_3px_0_#000] hover:translate-x-[3px] hover:translate-y-[3px] hover:shadow-none transition-transform cursor-pointer"
      >
        <span x-show="!showCode">âœ” Show Code</span>
        <span x-show="showCode">âŒ Hide Code</span>
      </button>
    </div>
  </div>

  <!-- Notifikasi copy -->
  <div
    x-show="copied"
    x-transition
    class="absolute right-5 bottom-5 bg-green-500 text-white px-3 py-2 rounded-md shadow-lg text-sm"
  >
    âœ… Copied!
  </div>

  <!-- Area Code -->
  <div
    x-show="showCode"
    x-transition
    class="bg-black text-white text-sm p-4 overflow-x-auto relative"
  >
    <pre><code x-ref="codeBlock">{code}</code></pre>
  </div>
</section>